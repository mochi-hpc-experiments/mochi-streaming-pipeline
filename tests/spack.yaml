spack:
  specs:
  - mochi-thallium
  - mochi-margo ^mercury~boostsys~checksum ^libfabric fabrics=tcp,rxm
  - mochi-abt-io
  - yaml-cpp
  - mpich
    #- py-pydantic
    #- py-pyyaml
    #- py-pytest
    #- py-deephyper
  concretizer:
    unify: true
    reuse: true
  modules:
    prefix_inspections:
      lib: [LD_LIBRARY_PATH]
      lib64: [LD_LIBRARY_PATH]
  packages:
    mochi-margo:
      require: "@0.22.0:"
    mercury:
      require:
        - "~checksum"
        - "~boostsys"
        - "+ofi"
    libfabric:
      require:
        - "fabrics=tcp,rxm"
  mirrors:
    mochi-buildcache:
      url: oci://ghcr.io/mochi-hpc/mochi-spack-buildcache
      signed: false
  config:
    install_tree:
      padded_length: 128
